#+title: december adventure 2025
#+date: <2025-12-08 Mon>
#+hugo_base_dir: ../..
#+hugo_section: garden
#+hugo_tags: december-adventure code japanese chinese calligraphy photography
#+hugo_custom_front_matter: :progress in-progress

Found out about the December adventure on Mastodon (likely from folks over at
[[https://merveilles.town/][merveilles.town]]). It's already almost a good third of the way into December, but
better late than never. Here's a bit [[https://eli.li/december-adventure][about it]], but the idea is just to pick a
project or a few, work on them, and log your progress.

I've taken the liberty of retroactively logging the days I missed.

#+ATTR_HTML: :class calendar-table
| 日 | 月 | 火 | 水 | 木 | 金 | 土 |
|----+----+----+----+----+----+----|
|    | [[december 1][01]] | [[december 2 - 3][02]] | [[december 2 - 3][03]] | [[december 4][04]] | [[december 5][05]] | [[december 6][06]] |
| [[december 7][07]] | [[december 8][08]] | [[december 9][09]] | 10 | 11 | 12 | 13 |
| 14 | 15 | 16 | 17 | 18 | 19 | 20 |
| 21 | 22 | 23 | 24 | 25 | 26 | 27 |
| 28 | 29 | 30 | 31 |    |    |    |

* december 1
Traveling back from Tokyo. I'm not very good at getting things done on the
plane.

* december 2 - 3
Slightly jet-lagged, had to work late, disliking how much colder it is in New
York -- it was 70F my last day in Tokyo.

* december 4
Took about 1500 photos with the Fujifilm X-S10 over the two and a half week trip
to Japan (fewer than I had expected actually, but that's probably because I
didn't take many photos in Tokyo). As a complete newbie, I've been trying to
learn a bit about photography and editing. I watched a nice introduction to the
FOSS workflow+raw developer software [[https://www.darktable.org/][darktable]] by [[https://youtu.be/ZUc6LOzg_Nk][Kevin Ajili]], and processed my
first photo.

I haven't quite straightened out how to post images on my website, but once I
do, maybe I'll show it here. In the interest of keeping page size/load times
down (inspired, as usual, by [[https://solar.lowtechmagazine.com/about/the-solar-website/][low-tech design]]), it might make sense to default
images to low-detail thumbnails (dithered?), with the full image available via
on hyperlink.

Edit, added later: here's a smallified version of the image I edited.

#+ATTR_HTML: :alt a mirror self-portrait taken by handheld camera in a hotel room
[[file:images/december-adventure-2025/japan-2025-self-portrait-dithered.jpg]]

This was produced with
#+begin_src sh
magick in.jpg -dither FloydSteinberg -colors 16 -resize 15% out.jpg
#+end_src
The original file was 6280x4160, at around 2.6mb, but I haven't bothered
checking it into the repository. The image above has been scaled down
significantly, and with 16 colors comes in at around 82kb.

The tricky thing with =ox-hugo= (I write my website in org-mode in emacs) is that
I sometimes produce images in the org-file directory instead of the hugo assets
directory (say when writing python code to generate images). These generated
images need to be copied over to the hugo directory. In cases like static
pre-selected images, though, I can just throw them into the hugo directory to
begin with.

* december 5
Did a practice JLPT N3 test, what with the exam looming on the 7th. I had been
low-key pretty stressed about the exam, given that I hadn't really studied the
language seriously in a few months and had never actually taken any practice
tests. Surprisingly, the practice test went well. I'm definitely still lacking
on the grammar front, but I now suspect I'll be able to pass.

With that stress slightly relieved, I ended up editing another 34 photos from
the trip. Since I still know next to nothing about editing, I mostly just
applied some standard edits (adjusted exposure, tweaked the sigmoid module's
contrast, denoised, dehazed, sharpened) for every image. For a few of them I
used the tone equalizer module to bring out some of the shadows or tone
down/establish contrast in the highlights. I also played with the colors a bit
-- I found myself gravitating towards the Kodak Portra 400 like preset on the
color equalizer module. I know it's lazy to use a preset, but the cool-toned
greens felt like they captured the mood in some of the small temples. Maybe
after doing a bit more photography and editing, I'll get a better sense of my
own creative direction for color.

I hope to post these pictures somewhere. Maybe on my blog or in this digital
garden. I'm also considering set up a PixelFed account. It might help me get
more serious about learning photography.

* december 6
Did another two JLPT practice tests. Feeling pretty hopeful about passing,
but not looking forward to the actual experience of taking a
filling-in-the-bubbles exam. I don't thing I've taken a written exam in almost
10 years... definitely more used to administering exams at this point.

* december 7
Exam went OK. Not super happy with it, but I'd be a bit surprised if I didn't
pass. The passing criteria are not particularly high. I hate the feeling of
being totally clueless on an exam question, but I think one has to approach
language learning differently than math. Or maybe it's that language exams tend
to have a broader scope (in the sense of the ideas and details that might
appear) than math exams tend to. Then again, it feels silly to say that language
learning is more of a lifelong process than learning, say, algebraic topology
is. So maybe I've just got a rosy picture in hindsight of the exams I took in
grad school, what with grade performance being largely irrelevant at that point.

** kakuji(角字)
I've always been really interested in Chinese characters, but this trip I got a
[[https://en.wikipedia.org/wiki/Seals_in_the_Sinosphere][hanko]] made by the very kind Arami-san(荒見さん) at [[https://www.hanko-shibuya.com/en-us/][Todo Insho]] while I was in
Tokyo. When sketching out a prototype on paper, he consulted with a little
handbook listing out kanji in various scripts. This piqued my interest, and I
ended up buying a [[https://www.graphicsha.co.jp/detail.html?p=54933][book]] on [[https://en.wikipedia.org/wiki/Seal_script][seal script]] in the design section of a bookstore in
Shibuya.

One part of the book that caught my eye was a page-and-a-half section on kakuji
(角字, literally: square/angled-letters). There's something [[https://en.wikipedia.org/wiki/Edomoji#/media/File:Kakuji_sample.png][visually striking]]
about their extreme space-filling blockiness when compared to the gentle
hieroglyphic curves of seal script or the varied visual rhythm of contemporary
regular script.

See, for example, this image I found on [[https://robundo.com/robundo/column/archives/268][Robundo Publishing's blog]]:

#+ATTR_HTML: :alt a manual showing correspondences between kakuji and other scripts
[[file:/images/december-adventure-2025/robundo_kakuji_22_d.jpg]]

It seems that there aren't too many examples of kakuji readily available on the
web. In particular, there's no complete font (say, for the jōyō kanji) that I
know of. There are about 200 or so examples that I've found images of. I'm
wondering it would be possible to extend -- semi-programmatically, perhaps --
the kakuji designs from these examples to all of the jōyō kanji. The basic idea
is that Chinese characters can be decomposed into building blocks called
radicals, so it may be possible to take the glyphs used for radicals in those
examples and extend them. Two immediate caveats: (1) we may not find all the
radicals we need in the examples so we may need to make our own designs, and (2)
scripts do not generally have unique per-character glyphs, and kakuji are no
different.

I'll get back to thinking about this tomorrow, but for now I'll link some
resources that I've found.
On kakuji:
- Black Silk, who seem to specialize in family crests/seals and related
  craftsmanship, have a [[https://www.black-silk.com/crest-list/crest-kakuji/][catalog of 角字]]
- There's the Edomoji dictionary (江戸文字大字典) written by 日向数夫, which I
  can't figure out how to get a copy of. I learned of this from [[https://youtu.be/welpJZSPtME][two]] [[https://youtu.be/esBk7o3DcYs][videos]] on
  YouTube by Inkbox, which are related to what I'm thinking about here.
  Incidentally, there's a comment on the first video asking the same question
  I'm asking here
- An artist [[https://www.zenzo.org/][Zenzo]] who designs a few new kakuji every week
  
On radical-based decomposition of Chinese characters:
- [[https://commons.wikimedia.org/wiki/Commons:Chinese_characters_decomposition][Here]] is a graphical decomposition of characters that I learned of from the
  website [[https://kanji.club/][kanji.club]], which may be of use here
- A slightly tangential, but still interesting project called the [[https://github.com/LingDong-/rrpl][Recursive
  Radical Packing Language]]

* december 8
Continuing the thread from yesterday, I thought it might be a good exercise to
start by translating the book's description of kakuji. It's definitely above my
pay grade, but I'll do my best to translate it in-line (I tend to use the
Jitindex Japanese-to-English dictionary).
#+begin_quote
江戸中期の太平爛熟期になると，寺小屋の普及により, いわゆる「読み，書き, そろばん」
は市民の常識となってきましたし，看板などの文字の書体もいろいろ人目につくように工
夫されてきました。

As the Edo period matured into its peaceful middle years and the terakoya (private
elementary schools) spread throughout the shogunate, "yomi, kaki, soroban"
(reading, writing, and the abacus) came to be general knowledge among commoners.
Accordingly, various calligraphic styles were developed for use on signboards
designed to catch the attention of those passing by.

相撲文字や芝居の勘亭流など特殊な書体が創案され, それが今日まで受け継がれてきてい
るのは周知の通りです。

Sumomoji (used in advertising sumo) and kanteiryū (used in
advertising plays) are two examples of styles conceived during this period that
have since then seen continuous use and are still today well-known (to a
Japanese audience).

しかし，これらはみな筆文字の変り種ですが，屋号や商標，ことに印半纏の裾によく使わ
れた文字は，定規を用いて生み出された当時唯一のレタリングで, しかも楷書からでなく，
篆書を基調としてデザインされていることが特徴といえましょう。

Kakuji is a style of lettering unique to this period of time that --
unlike the varieties mentioned above, which used a brush -- used rulers to
write store names, trademarks, and most of all, to decorate the hems of
shirushibanten (livery coats). This style, moreover, did not follow the
standard kaisho style of writing used for Chinese characters, but instead was
designed off of seal script (the style used to engrave seals).

これはすでに来朝の元・明の禅僧たちによってもたらされた篆刻が, 文人墨客の間に普及
を見て，篆書そのものが一般市民の眼にも親しい存在となってきたからでしょうが, すべ
て直線で処理された篆書デザインとして, なかなか優秀なものということができるでしょ
う。

Seal engraving, previously brought to Japan by Zen priests, had spread among
writers and artists and thus seal script was a familiar sight to the general
population, but kakuji would likely have stood out with its purely straight
lines.

この直線による筆画の処理は, おそらく中国の九畳篆あたりにヒントを得たのではないか
と思われます。

The method of drawing strokes as straight horizontal or vertical lines is
thought to have been influenced by the Chinese [[https://en.wikipedia.org/wiki/Nine-fold_seal_script][nine-fold seal script]] (九叠篆
simplified, 九疊篆 traditional, jiǔdiézhuàn pinyin).

この文字をあしらった印半纏は, 以後明治・大正からつい戦前まで, 大工・左官等の職人
に愛用されてきましたが, 最近はあまり見かけなくなりました。

Shirushibanten adorned with kakuji would remain a favorite of carpenters and
plasterers during the Meiji and Taisho eras until the days leading up to the
war, but are now rarely seen.

#+ATTR_HTML: :class attribution
小田切草雲，篆書デザイン，p.38
#+end_quote

This passage (which unfortunately seems to be all the book has on kakuji)
suggests looking also at the nine-fold seal script. Here are some resources I
have found:
- a collection of [[https://commons.wikimedia.org/wiki/Category:Calligraphy_manuals_including_nine-fold_seal_script][images]] of calligraphy manuals including nine-fold seal script
- a [[https://babelstone.co.uk/Blog/2012/10/khitan-seals.html][site]] with some images of the Khitan seals and a table of potential
  correspondences with standard character forms
- some helpful [[https://digitalorientalist.com/2025/02/25/digital-resources-for-reading-japanese-seals/][notes]] on resources for reading Japanese seals
- slightly off-topic, but [[https://en.wikipedia.org/wiki/Kufic#Square_Kufic][square Kufic script]] is an Arabic doppelganger!
I'm sure there are a lot more resources in Chinese, but unfortunately my
Mandarin is still super basic.

I was hoping to start looking at some of the available kakuji, breaking down
radical shapes, and writing some code, but I got a little too interested in seal
scripts and the translation was tough, so I'll leave that for tomorrow.

* december 9

Before I fell asleep last night I was doodling kanji, trying to get a concrete
sense of how kakuji are designed. As the passage above points out, kakuji are
designed after seal script, so building an intuition of how the contemporary
glyphs correspond to seal script glyphs is probably a good place to start. As
I do that, though, I think it'd be fun to draw out some kakuji as well!

So... let's make a kakuji editor! Doodling is all well and good, but it'd be
nice to have a little purpose-built glyph editor. I've recently been trying to
learn a bit of C using =raylib=, and this is as good of a learning project as any.

The basic idea is a simple grid-based editor where you can paint in valid
kakuji. I haven't yet worked out exactly what I mean by valid (we'll narrow the
definition down as we go), but for now notice that kakuji must be space-filling
and be composed entirely of vertical and horizontal strokes.
#+ATTR_HTML: :alt an example of kakuji using diagonal lines
[[file:/images/december-adventure-2025/black-silk-4625.jpg]]
By space-filling, I
mean that every grid element must have at least some ink in it. The second rule
is actually my own -- there are examples on Black Silk's crest list that have
diagonal strokes (see the image to the left). I'm happy to ignore such cases for
now. This particular example, incidentally, is no longer used: 總 is listed as
the pre-simplified form of 総 in Wikipedia's [[https://en.wikipedia.org/wiki/List_of_j%C5%8Dy%C5%8D_kanji][list of jōyō kanji]], and means whole
or total.

After tinkering for a bit, I got some of the =raylib= boilerplate out of the way
and ended up with a very preliminary little clickable grid-based editor: 

#+ATTR_HTML: :alt a dinky editor for filling in black squares in a grid with red ink
[[file:/images/december-adventure-2025/raylib_grid_r.jpg]]

To get a bit of a drawing feel, it'd obviously be nice to click and drag,
brush-like, to draw contiguous blocks of ink. Frustratingly, I seem to be
running into an issue with how =raylib= interprets my mouse's position when I
drag. Maybe it's due to my tiling window manager, or maybe it's due to some kind
of X/Wayland incompatibility, but as soon as I drag my mouse, =raylib= reports
that my mouse is a solid 50 pixels above where it actually is, until I release
the left button and move my mouse a bit. It doesn't seem to be an error in my
code -- I was able to reproduce this in the little program I was writing a month
ago to learn the basics of =raylib=.

Alas, I've already wasted most of my night trying to debug this, so I'll leave
it here for now. I suppose I can return to this and swap to keyboard controls,
though it definitely won't feel as smooth. Then finally onto the interesting
part: understanding the patterns behind the gaps in ink and the radical shapes!

* future adventures?

Thought I'd collect the little project ideas that tend to pop into my head when
working on code.
- write up some notes on the basics of how C programs are compiled and linked,
  as well as the platform-dependent aspects. /inspired by:/ me realizing I have no
  idea what I'm doing when I'm putting together a Makefile or working on a
  C project on my mac when traveling
- learn and write a toy program in assembly! and/or forth! and/or uxntal! if I
  can get the kakuji editor working, it might be a good second program to port
  over. /inspired by:/ [[https://100r.co][100r]], learning more about how memory and caches works
- speaking of uxn... the =screen.tal= example that ships with =uxn= generates
  patterns that remind me of the keffiyeh. time for a little spritework?
  /inspired by:/ https://www.youtube.com/watch?v=jLRE_TSpnYc
- exploring moving away from org/ox-hugo for static site generation. /inspired
  by:/ as much as I love being able to use org-babel to write and run code from
  directly inside my posts, losing control over the final export is annoying.
  maybe I could just post-process the generated html? or rather, use tools that
  hugo exposes to do so?
